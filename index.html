<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusLunchAi - 프로젝트 포트폴리오</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Calm Harmony (Gray-50, White, Indigo-600) -->
    <!-- Application Structure Plan: A single-page, top-down narrative SPA. It follows the report's structure (Hero, Tech Stack, Features, Troubleshooting) but enhances it. The 'Core Features' section is the app's centerpiece, featuring an interactive JavaScript-powered CRUD demo that simulates the chatbot's database commands (!추가, !수정, !삭제) on a live data table. This is more effective than static text for demonstrating the project's capability. An accordion is used for 'Troubleshooting' to improve readability. This structure directly supports the goal of making the *project report* itself explorable and demonstrating its technical depth. -->
    <!-- Visualization & Content Choices:
        - Report Info: CRUD commands (!추가, !수정, !삭제). Goal: Demonstrate. Viz/Method: Interactive HTML table + JS Modals + JS data array. Interaction: User clicks demo buttons, fills modal, JS updates table. Justification: This is the 'wow' factor, proving the concept live instead of just describing it. Library: Vanilla JS.
        - Report Info: Tech Stack. Goal: Inform. Viz/Method: Interactive HTML cards. Interaction: Hover. Justification: More engaging than a bullet list. Library: Tailwind CSS.
        - Report Info: Troubleshooting section. Goal: Organize/Inform. Viz/Method: HTML/JS Accordion. Interaction: Click to expand/collapse. Justification: Prevents a long wall of text, improving UX. Library: Vanilla JS.
        - Report Info: Data Cleaning. Goal: Educate. Viz/Method: Before/After cards + HTML `<code>` block. Interaction: Static. Justification: Clearly shows the technical solution. Library: HTML/CSS.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. No Chart.js needed as the interactive table serves as the primary data visualization. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Pretendard', sans-serif;
        }
        @import url('https://rsms.me/inter/inter.css');
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            height: auto;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(255, 255, 255, 0.85);
        }

        .accordion-content {
            display: none;
            transition: max-height 0.3s ease-out;
            overflow: hidden;
        }
        
        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .modal-content {
            transition: transform 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header & Navigation -->
    <header class="sticky-nav shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-indigo-600 tracking-tighter">CampusLunchAi</h1>
            <div class="hidden md:flex space-x-6">
                <a href="#about-me" class="text-gray-600 hover:text-indigo-600">개발자 소개</a>
                <a href="#overview" class="text-gray-600 hover:text-indigo-600">프로젝트 개요</a>
                <a href="#tech" class="text-gray-600 hover:text-indigo-600">적용 기술</a>
                <a href="#features" class="text-gray-600 hover:text-indigo-600">핵심 기능</a>
                <a href="#troubleshooting" class="text-gray-600 hover:text-indigo-600">문제 해결</a>
            </div>
            <button id="mobile-menu-btn" class="md:hidden text-gray-700 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#about-me" class="block text-gray-600 hover:text-indigo-600">개발자 소개</a>
            <a href="#overview" class="block text-gray-600 hover:text-indigo-600">프로젝트 개요</a>
            <a href="#tech" class="block text-gray-600 hover:text-indigo-600">적용 기술</a>
            <a href="#features" class="block text-gray-600 hover:text-indigo-600">핵심 기능</a>
            <a href="#troubleshooting" class="block text-gray-600 hover:text-indigo-600">문제 해결</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <!-- 0. About Me (NEW SECTION) -->
        <section id="about-me" class="py-16">
            <div class="max-w-3xl mx-auto text-center">
                <h2 class="text-4xl md:text-5xl font-bold tracking-tighter mb-4">문석민</h2>
                <p class="text-2xl text-indigo-600 font-semibold mb-8">"기능 하나하나 섬세하게 구현하는 개발자"</p>
                <p class="text-lg text-gray-700 leading-relaxed text-left">
                    저는 프로젝트를 진행 할 때에 구현해야 하는 기능이나 생각난 아이디어가 있다면 빈틈 없이 개발을 추구합니다.
                    이로 인해 디테일한 결과물이 나올 수 있다고 생각합니다.
                </p>
                <p class="text-lg text-gray-700 leading-relaxed text-left mt-4">
                    이 프로젝트를 통해 여러 상황에 대응하는 프롬프트를 평상시에 오전수업이 끝나고 점심을 고민하는 대학생들에게 시간을 절약하고 원하는 메뉴를 빠르게 선택 할 수 있게 되었으면 좋겠습니다.
                </p>
            </div>
            <hr class="mt-16 border-gray-200">
        </section>

        <!-- 1. Hero / Overview -->
        <section id="overview" class="py-16">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                <div>
                    <span class="text-indigo-600 font-semibold">실시간 CRUD가 가능한 점심 메뉴 추천 챗봇</span>
                    <h2 class="text-4xl md:text-5xl font-bold tracking-tighter mt-2 mb-6">Excel DB를 실시간 제어하는<br>대화형 Flask 챗봇</h2>
                    <p class="text-lg text-gray-600 leading-relaxed">
                        단순히 정해진 답변만 반복하는 챗봇이 아닌, 사용자의 실제 데이터를 기반으로 지능적인 추천을 제공하는 시스템입니다. 사용자는 챗봇과 대화하며 메뉴를 추천받고, <code>!추가</code>, <code>!수정</code>, <code>!삭제</code> 명령어로 챗봇이 참고하는 Excel DB를 실시간으로 업데이트할 수 있습니다. 챗봇은 이 최신 데이터를 즉시 다음 추천에 반영합니다.
                    </p>
                </div>
                <!-- Chatbot UI Mockup -->
                <div class="bg-white p-6 rounded-2xl shadow-xl border border-gray-100">
                    <div class="flex flex-col h-96">
                        <div class="flex-grow space-y-4 overflow-y-auto pr-2">
                            <div class="flex">
                                <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none max-w-xs">
                                    안녕하세요! 점심 메뉴 추천 챗봇입니다.
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <div class="bg-indigo-600 text-white p-3 rounded-lg rounded-br-none max-w-xs">
                                    어제 비싼 걸 먹어서 오늘은 가성비 좋은 메뉴 추천해줘.
                                </div>
                            </div>
                            <div class="flex">
                                <div class="bg-gray-200 text-gray-800 p-3 rounded-lg rounded-bl-none max-w-xs">
                                    어제 파스타를 드셨네요! 오늘은 5000원대 '누들두들'은 어떠신가요?
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <div class="bg-indigo-600 text-white p-3 rounded-lg rounded-br-none max-w-xs">
                                    <code>!추가 학식 / 금 / 제육덮밥 / 6000 / 700 / 한식 / 고자극</code>
                                </div>
                            </div>
                            <div class="flex">
                                <div class="bg-green-100 text-green-800 p-3 rounded-lg rounded-bl-none max-w-xs">
                                    ✅ '제육덮밥' 메뉴가 성공적으로 추가되었습니다.
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 flex">
                            <input type="text" placeholder="메시지를 입력하세요..." class="flex-grow border rounded-l-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-300" disabled>
                            <button class="bg-indigo-600 text-white p-3 rounded-r-lg font-semibold">전송</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. Tech Stack -->
        <section id="tech" class="py-16">
            <h2 class="text-3xl font-bold text-center mb-12">적용 기술 (Tech Stack)</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 text-center transform transition-transform hover:scale-105 hover:shadow-lg">
                    <span class="text-4xl">🐍</span>
                    <h3 class="font-bold mt-3">Python</h3>
                    <p class="text-sm text-gray-500">Backend Logic</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 text-center transform transition-transform hover:scale-105 hover:shadow-lg">
                    <span class="text-4xl">🚀</span>
                    <h3 class="font-bold mt-3">Flask</h3>
                    <p class="text-sm text-gray-500">Web Server</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 text-center transform transition-transform hover:scale-105 hover:shadow-lg">
                    <span class="text-4xl">✨</span>
                    <h3 class="font-bold mt-3">Gemini</h3>
                    <p class="text-sm text-gray-500">LLM API</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 text-center transform transition-transform hover:scale-105 hover:shadow-lg">
                    <span class="text-4xl">🐼</span>
                    <h3 class="font-bold mt-3">Pandas</h3>
                    <p class="text-sm text-gray-500">Data Handling</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 text-center transform transition-transform hover:scale-105 hover:shadow-lg">
                    <span class="text-4xl">📋</span>
                    <h3 class="font-bold mt-3">Excel</h3>
                    <p class="text-sm text-gray-500">Local DB</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100 text-center transform transition-transform hover:scale-105 hover:shadow-lg">
                    <span class="text-4xl">🧹</span>
                    <h3 class="font-bold mt-3">RegEx</h3>
                    <p class="text-sm text-gray-500">Data Cleaning</p>
                </div>
            </div>
        </section>

        <!-- 3. Core Features -->
        <section id="features" class="py-16">
            <h2 class="text-3xl font-bold text-center mb-16">핵심 기능 상세</h2>

            <!-- Feature: CRUD Demo -->
            <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100 mb-12">
                <span class="text-indigo-600 font-semibold">핵심 기능 1</span>
                <h3 class="text-2xl font-bold mt-2 mb-4">채팅을 통한 실시간 데이터 관리 (CRUD) 데모</h3>
                <p class="text-gray-600 mb-6">
                    챗봇의 가장 강력한 기능인 실시간 데이터 제어(CRUD)를 시뮬레이션합니다. 아래 버튼을 클릭하여 JavaScript로 관리되는 이 테이블의 데이터를 직접 추가, 수정, 삭제해 보세요. 실제 챗봇은 이 작업을 Python과 Pandas로 처리합니다.
                </p>
                
                <!-- Control Buttons -->
                <div class="flex flex-wrap gap-3 mb-6">
                    <button id="btn-add-modal" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg">
                        !추가 (Create)
                    </button>
                    <button id="btn-update-modal" class="bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded-lg">
                        !수정 (Update)
                    </button>
                    <button id="btn-delete-modal" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg">
                        !삭제 (Delete)
                    </button>
                </div>

                <!-- Interactive Table -->
                <div class="chart-container rounded-lg border border-gray-200">
                    <table class="w-full min-w-[800px] text-left">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="p-3 font-semibold text-sm">식당 이름</th>
                                <th class="p-3 font-semibold text-sm">요일</th>
                                <th class="p-3 font-semibold text-sm">메뉴</th>
                                <th class="p-3 font-semibold text-sm">가격</th>
                                <th class="p-3 font-semibold text-sm">칼로리</th>
                                <th class="p-3 font-semibold text-sm">음식의 종류</th>
                                <th class="p-3 font-semibold text-sm">맛</th>
                            </tr>
                        </thead>
                        <tbody id="menu-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- JS will populate this -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Other Features Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <!-- Feature: Data Cleaning -->
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <span class="text-indigo-600 font-semibold">핵심 기능 2</span>
                    <h3 class="text-2xl font-bold mt-2 mb-4">지능형 데이터 정제 (Cleaning)</h3>
                    <p class="text-gray-600 mb-4">
                        "약 850kcal", "5,500원", "7000~9000원" 등 비정형 데이터를 `clean_value` 함수와 정규표현식(RegEx)으로 정제하여 LLM이 정확히 인식할 수 있도록 처리합니다.
                    </p>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-red-50 border border-red-200 p-4 rounded-lg">
                            <h4 class="font-bold text-red-700">Before</h4>
                            <ul class="list-disc list-inside text-red-600 text-sm mt-2">
                                <li>"약 850kcal"</li>
                                <li>"5,500원"</li>
                                <li>"7000~9000원"</li>
                            </ul>
                        </div>
                        <div class="bg-green-50 border border-green-200 p-4 rounded-lg">
                            <h4 class="font-bold text-green-700">After</h4>
                            <ul class="list-disc list-inside text-green-600 text-sm mt-2">
                                <li>"850"</li>
                                <li>"5500"</li>
                                <li>"7000~9000" (범위 유지)</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Feature: Context-Aware -->
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <span class="text-indigo-600 font-semibold">핵심 기능 3</span>
                    <h3 class="text-2xl font-bold mt-2 mb-4">대화 맥락을 기억하는 추천</h3>
                    <p class="text-gray-600 mb-4">
                        `session`의 대화 기록을 LLM에 함께 전달하고, "비싼 메뉴를 먹었다면 저렴한 메뉴를 추천하라"는 시스템 프롬프트를 통해 사용자의 이전 맥락을 고려한 추천을 생성합니다.
                    </p>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <p class="text-sm text-gray-700"><span class="font-bold text-indigo-700">User:</span> 어제 비싼 거 먹었어.</p>
                        <p class="text-sm text-gray-700 mt-2"><span class="font-bold text-gray-800">Bot:</span> 어제 지출이 크셨네요! 오늘은 5000원대 가성비 메뉴인 '누들두들' 어떠세요?</p>
                    </div>
                </div>
                
                <!-- Feature: Real-time Sync -->
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <span class="text-indigo-600 font-semibold">핵심 기능 4</span>
                    <h3 class="text-2xl font-bold mt-2 mb-4">실시간 DB 연동 (Dynamic Prompt)</h3>
                    <p class="text-gray-600 mb-4">
                        서버 재시작 없이도 <code>!추가</code>된 데이터를 챗봇이 즉시 인식합니다. 모든 요청마다 `get_system_prompt()`가 Excel을 다시 읽어 최신 프롬프트를 생성하기 때문입니다.
                    </p>
                    <div class="flex flex-col md:flex-row items-center justify-between space-y-2 md:space-y-0 md:space-x-2 text-center text-sm font-semibold">
                        <div class="bg-gray-100 p-3 rounded-lg">질문 요청</div>
                        <span class="text-indigo-500 font-bold">→</span>
                        <div class="bg-gray-100 p-3 rounded-lg">Excel 읽기<br>(Pandas)</div>
                        <span class="text-indigo-500 font-bold">→</span>
                        <div class="bg-gray-100 p-3 rounded-lg">최신 프롬프트<br>생성</div>
                        <span class="text-indigo-500 font-bold">→</span>
                        <div class="bg-indigo-100 p-3 rounded-lg">LLM 응답</div>
                    </div>
                </div>
                
                <!-- Feature: Composite Key -->
                <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
                    <span class="text-indigo-600 font-semibold">핵심 기능 5</span>
                    <h3 class="text-2xl font-bold mt-2 mb-4">중복 데이터 문제 해결</h3>
                    <p class="text-gray-600 mb-4">
                        '학식'의 '돈까스'와 'A식당'의 '돈까스'를 구분하기 위해, '메뉴' 이름 대신 <strong>'식당 이름' + '메뉴' 조합(Composite Key)</strong>을 고유 식별자로 사용하여 데이터를 정확하게 수정/삭제합니다.
                    </p>
                    <code class="text-sm bg-gray-100 p-3 rounded-lg block">
                        !수정 <span class="text-red-600">학식</span> / <span class="text-blue-600">돈까스</span> / 가격 / 6500
                    </code>
                </div>

            </div>
        </section>
        
        <!-- 4. Troubleshooting -->
        <section id="troubleshooting" class="py-16">
            <h2 class="text-3xl font-bold text-center mb-12">문제 해결 과정 (Troubleshooting)</h2>
            <div class="max-w-3xl mx-auto space-y-4">
                
                <!-- Accordion Item 1 -->
                <div class="bg-white rounded-lg shadow-md border border-gray-100">
                    <button class="accordion-btn flex justify-between items-center w-full p-5 font-semibold text-left">
                        <span>문제 1: `ValueError` - 비정형 데이터 변환 오류</span>
                        <svg class="accordion-icon w-5 h-5 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content p-5 pt-0">
                        <p class="text-gray-600">
                            <strong>현상:</strong> "4900원"이나 "약 850kcal" 같은 문자열을 `int()`로 변환하려다 `ValueError`가 발생하여 챗봇이 데이터를 읽지 못했습니다.<br>
                            <strong>해결:</strong> `re.sub`를 활용한 `clean_value` 함수를 구현하여, 파일에서 읽어오거나 파일에 저장하는 모든 데이터에서 불필요한 텍스트를 제거하고 순수한 숫자 또는 범위 문자열만 남도록 정제했습니다.
                        </p>
                    </div>
                </div>
                
                <!-- Accordion Item 2 -->
                <div class="bg-white rounded-lg shadow-md border border-gray-100">
                    <button class="accordion-btn flex justify-between items-center w-full p-5 font-semibold text-left">
                        <span>문제 2: 중복 메뉴명으로 인한 데이터 수정/삭제 오류</span>
                        <svg class="accordion-icon w-5 h-5 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content p-5 pt-0">
                        <p class="text-gray-600">
                            <strong>현상:</strong> 초기 기획 시 `!삭제 돈까스`처럼 '메뉴' 이름만으로 항목을 식별하려 했습니다. 하지만 '학식'의 '돈까스'와 'A식당'의 '돈까스'처럼 중복 메뉴명이 있을 경우, 의도치 않은 데이터가 삭제/수정되는 심각한 문제가 있었습니다.<br>
                            <strong>해결:</strong> '메뉴'만으로 항목을 식별하는 대신, **'식당 이름'과 '메뉴'를 조합 (Composite Key)**하여 항목을 고유하게 식별하도록 로직을 변경했습니다. `delete_menu_item`과 `modify_menu_item` 함수에서 `(df['식당 이름'] == restaurant_name) & (df['메뉴'] == menu_name)`와 같이 두 개의 조건으로 `target_index`를 찾도록 수정하여 데이터의 무결성을 확보했습니다.
                        </p>
                    </div>
                </div>

                <!-- Accordion Item 3 -->
                <div class="bg-white rounded-lg shadow-md border border-gray-100">
                    <button class="accordion-btn flex justify-between items-center w-full p-5 font-semibold text-left">
                        <span>문제 3: `Permission denied` - Excel 파일 접근 권한 오류</span>
                        <svg class="accordion-icon w-5 h-5 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content p-5 pt-0">
                        <p class="text-gray-600">
                            <strong>현상:</strong> `!추가`/`!수정`/`!삭제` 명령어로 파일 저장을 시도할 때 `[Errno 13] Permission denied` 오류가 발생했습니다.<br>
                            <strong>해결:</strong> Excel 프로그램이 파일을 열고 있으면 운영체제(Windows)가 파일에 '잠금(lock)'을 걸어 Python이 수정할 수 없음을 확인했습니다. **Excel 파일을 닫은 상태**에서 Flask 서버를 실행해야 함을 명확히 인지했습니다.
                        </p>
                    </div>
                </div>
                
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-300 mt-16">
        <div class="container mx-auto px-6 py-8 text-center">
            <p>CampusLunchAi - Interactive Project Portfolio</p>
        </div>
    </footer>
    
    <!-- Modals -->
    <!-- Add Modal -->
    <div id="add-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 invisible opacity-0">
        <div class="modal-content bg-white w-full max-w-lg p-6 rounded-lg shadow-xl transform scale-95">
            <h3 class="text-xl font-bold mb-4">!추가 (Create)</h3>
            <p class="text-sm text-gray-600 mb-4"><code>!추가 식당/요일/메뉴/가격/칼로리/종류/맛</code></p>
            <form id="add-form" class="space-y-3">
                <input type="text" id="add-restaurant" placeholder="식당 이름" class="w-full p-2 border rounded" required>
                <input type="text" id="add-day" placeholder="요일 (예: 상시)" class="w-full p-2 border rounded" required>
                <input type="text" id="add-menu" placeholder="메뉴" class="w-full p-2 border rounded" required>
                <input type="text" id="add-price" placeholder="가격 (예: 5500 또는 7000~9000)" class="w-full p-2 border rounded" required>
                <input type="text" id="add-calories" placeholder="칼로리 (예: 600)" class="w-full p-2 border rounded" required>
                <input type="text" id="add-type" placeholder="음식의 종류 (예: 한식)" class="w-full p-2 border rounded" required>
                <input type="text" id="add-taste" placeholder="맛 (예: 고자극)" class="w-full p-2 border rounded" required>
                <div class="flex justify-end space-x-3 pt-3">
                    <button type="button" class="btn-cancel bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300">취소</button>
                    <button type="submit" class="bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700">추가</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Update Modal -->
    <div id="update-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 invisible opacity-0">
        <div class="modal-content bg-white w-full max-w-lg p-6 rounded-lg shadow-xl transform scale-95">
            <h3 class="text-xl font-bold mb-4">!수정 (Update)</h3>
            <p class="text-sm text-gray-600 mb-4"><code>!수정 식당/메뉴/변경할항목/새값</code></p>
            <form id="update-form" class="space-y-3">
                <input type="text" id="update-restaurant" placeholder="식당 이름 (찾을 대상)" class="w-full p-2 border rounded" required>
                <input type="text" id="update-menu" placeholder="메뉴 (찾을 대상)" class="w-full p-2 border rounded" required>
                <select id="update-column" class="w-full p-2 border rounded bg-white" required>
                    <option value="">-- 변경할 항목 --</option>
                    <option value="식당 이름">식당 이름</option>
                    <option value="요일">요일</option>
                    <option value="메뉴">메뉴</option>
                    <option value="가격">가격</option>
                    <option value="칼로리">칼로리</option>
                    <option value="음식의 종류">음식의 종류</option>
                    <option value="맛">맛</option>
                </select>
                <input type="text" id="update-value" placeholder="새로운 값" class="w-full p-2 border rounded" required>
                <div class="flex justify-end space-x-3 pt-3">
                    <button type="button" class="btn-cancel bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300">취소</button>
                    <button type="submit" class="bg-yellow-500 text-white py-2 px-4 rounded-lg hover:bg-yellow-600">수정</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Modal -->
    <div id="delete-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 invisible opacity-0">
        <div class="modal-content bg-white w-full max-w-lg p-6 rounded-lg shadow-xl transform scale-95">
            <h3 class="text-xl font-bold mb-4">!삭제 (Delete)</h3>
            <p class="text-sm text-gray-600 mb-4"><code>!삭제 식당이름 / 메뉴이름</code></p>
            <form id="delete-form" class="space-y-3">
                <input type="text" id="delete-restaurant" placeholder="식당 이름 (삭제할 대상)" class="w-full p-2 border rounded" required>
                <input type="text" id="delete-menu" placeholder="메뉴 (삭제할 대상)" class="w-full p-2 border rounded" required>
                <div class="flex justify-end space-x-3 pt-3">
                    <button type="button" class="btn-cancel bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300">취소</button>
                    <button type="submit" class="bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700">삭제</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="fixed bottom-10 right-10 bg-green-600 text-white py-3 px-6 rounded-lg shadow-xl invisible opacity-0 transition-all duration-300">
        <span id="toast-message"></span>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Initial Data (from user's CSV snippet) ---
            let menuData = [
                { "식당 이름": "학식", "요일": "월", "메뉴": "김치볶음밥", "가격": "4900", "칼로리": "850", "음식의 종류": "한식, 밥", "맛": "고자극" },
                { "식당 이름": "학식", "요일": "목", "메뉴": "삼겹살덮밥", "가격": "5500", "칼로리": "500", "음식의 종류": "한식, 밥, 고기", "맛": "고자극" },
                { "식당 이름": "학식", "요일": "상시", "메뉴": "라면", "가격": "4500", "칼로리": "700", "음식의 종류": "라면", "맛": "고자극" },
                { "식당 이름": "학식", "요일": "상시", "메뉴": "돈까스", "가격": "6000", "칼로리": "750", "음식의 종류": "경양식, 고기", "맛": "고자극" },
                { "식당 이름": "학식", "요일": "상시", "메뉴": "백반", "가격": "6500", "칼로리": "600", "음식의 종류": "한식", "맛": "고자극" },
                { "식당 이름": "고척칼국수", "요일": "수요일 제외", "메뉴": "칼국수", "가격": "9000", "칼로리": "500", "음식의 종류": "한식, 면", "맛": "저자극" },
                { "식당 이름": "롯데리아", "요일": "상시", "메뉴": "햄버거", "가격": "7000~9000", "칼로리": "700", "음식의 종류": "양식, 빵", "맛": "고자극" },
                { "식당 이름": "홍콩반점", "요일": "상시", "메뉴": "짜장면", "가격": "6500", "칼로리": "700", "음식의 종류": "중식, 면", "맛": "고자극" },
                { "식당 이름": "홍콩반점", "요일": "상시", "메뉴": "짬뽕", "가격": "7800", "칼로리": "700", "음식의 종류": "중식, 면", "맛": "고자극" },
                { "식당 이름": "지지고", "요일": "상시", "메뉴": "누들두들", "가격": "5000", "칼로리": "400", "음식의 종류": "일식, 면", "맛": "고자극" }
            ];

            const tableBody = document.getElementById('menu-table-body');
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            let toastTimeout;

            // --- Render Table Function ---
            function renderTable(data) {
                tableBody.innerHTML = '';
                if (data.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="7" class="p-4 text-center text-gray-500">데이터가 없습니다. !추가 버튼으로 메뉴를 추가해보세요.</td></tr>';
                    return;
                }
                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-gray-50';
                    row.innerHTML = `
                        <td class="p-3 text-sm">${item['식당 이름']}</td>
                        <td class="p-3 text-sm">${item['요일']}</td>
                        <td class="p-3 text-sm font-semibold">${item['메뉴']}</td>
                        <td class="p-3 text-sm">${item['가격']}</td>
                        <td class="p-3 text-sm">${item['칼로리']}</td>
                        <td class="p-3 text-sm">${item['음식의 종류']}</td>
                        <td class="p-3 text-sm">${item['맛']}</td>
                    `;
                    tableBody.appendChild(row);
                });
            }

            // --- Toast Notification Function ---
            function showToast(message, isError = false) {
                clearTimeout(toastTimeout);
                toastMessage.textContent = message;
                toast.className = toast.className.replace(/bg-.*?-600/, isError ? 'bg-red-600' : 'bg-green-600');
                toast.classList.remove('invisible', 'opacity-0');
                
                toastTimeout = setTimeout(() => {
                    toast.classList.add('invisible', 'opacity-0');
                }, 3000);
            }

            // --- Modal Open/Close Logic ---
            const modals = document.querySelectorAll('.modal');
            const addModal = document.getElementById('add-modal');
            const updateModal = document.getElementById('update-modal');
            const deleteModal = document.getElementById('delete-modal');

            function openModal(modal) {
                modal.classList.remove('invisible', 'opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }

            function closeModal(modal) {
                modal.classList.add('invisible', 'opacity-0');
                modal.querySelector('.modal-content').classList.add('scale-95');
            }

            document.getElementById('btn-add-modal').addEventListener('click', () => openModal(addModal));
            document.getElementById('btn-update-modal').addEventListener('click', () => openModal(updateModal));
            document.getElementById('btn-delete-modal').addEventListener('click', () => openModal(deleteModal));

            modals.forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        closeModal(modal);
                    }
                });
                modal.querySelectorAll('.btn-cancel').forEach(btn => {
                    btn.addEventListener('click', () => closeModal(modal));
                });
            });

            // --- CRUD Logic ---

            // CREATE
            document.getElementById('add-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const newItem = {
                    "식당 이름": document.getElementById('add-restaurant').value,
                    "요일": document.getElementById('add-day').value,
                    "메뉴": document.getElementById('add-menu').value,
                    "가격": document.getElementById('add-price').value,
                    "칼로리": document.getElementById('add-calories').value,
                    "음식의 종류": document.getElementById('add-type').value,
                    "맛": document.getElementById('add-taste').value
                };
                menuData.push(newItem);
                renderTable(menuData);
                showToast(`✅ '${newItem.메뉴}' 메뉴가 성공적으로 추가되었습니다.`);
                closeModal(addModal);
                e.target.reset();
            });

            // UPDATE
            document.getElementById('update-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const restaurant = document.getElementById('update-restaurant').value;
                const menu = document.getElementById('update-menu').value;
                const column = document.getElementById('update-column').value;
                const value = document.getElementById('update-value').value;

                const index = menuData.findIndex(item => item['식당 이름'] === restaurant && item['메뉴'] === menu);
                
                if (index !== -1) {
                    menuData[index][column] = value;
                    renderTable(menuData);
                    showToast(`✅ '${menu}' 메뉴의 '${column}'이(가) 수정되었습니다.`);
                    closeModal(updateModal);
                    e.target.reset();
                } else {
                    showToast(`❌ '${restaurant}' 식당의 '${menu}' 메뉴를 찾을 수 없습니다.`, true);
                }
            });

            // DELETE
            document.getElementById('delete-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const restaurant = document.getElementById('delete-restaurant').value;
                const menu = document.getElementById('delete-menu').value;
                
                const index = menuData.findIndex(item => item['식당 이름'] === restaurant && item['메뉴'] === menu);
                
                if (index !== -1) {
                    menuData.splice(index, 1);
                    renderTable(menuData);
                    showToast(`✅ '${restaurant}' 식당의 '${menu}' 메뉴가 삭제되었습니다.`);
                    closeModal(deleteModal);
                    e.target.reset();
                } else {
                    showToast(`❌ '${restaurant}' 식당의 '${menu}' 메뉴를 찾을 수 없습니다.`, true);
                }
            });
            
            // --- Accordion Logic ---
            document.querySelectorAll('.accordion-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('.accordion-icon');
                    
                    if (content.style.display === 'block') {
                        content.style.display = 'none';
                        icon.classList.remove('rotate-180');
                    } else {
                        content.style.display = 'block';
                        icon.classList.add('rotate-180');
                    }
                });
            });

            // --- Mobile Menu Logic ---
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // --- Initial Render ---
            renderTable(menuData);
        });
    </script>
</body>
</html>